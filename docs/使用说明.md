# XLXZ Wiki 使用说明

用 Markdown 写策划案，系统自动识别词条引用，鼠标悬停即可查看定义。

---

## 快速上手

把 `.md` 文件放到 `wiki-docs/` 目录下，打开浏览器访问即可。

```
wiki-docs/
├── 滑移.md
├── 暴击率.md
└── 战斗系统/
    └── 伤害计算.md
```

---

## 语法速查

| 语法 | 作用 | 示例 |
|------|------|------|
| `【词条名】` | 引用词条 | `【滑移】` |
| `【词条】：定义` | 文件内临时定义 | `【施法者】：发起攻击的玩家` |
| `%% 公式 %%` | 策划公式 | `%% [伤害] = <攻击力> * 2 %%` |
| `[xxx]` | 公式中的计算值 | 蓝色加粗显示 |
| `<xxx>` | 公式中的设计值 | 紫色斜体显示 |

---

## 1. 词条定义

### 方式一：文件即词条（推荐）

每个 `.md` 文件自动成为一个词条：

- **文件名** = 词条名
- **文件内容** = 词条定义（悬停时显示）

```
wiki-docs/
├── 滑移.md          → 词条「滑移」
├── 暴击率.md        → 词条「暴击率」
└── 角色/
    └── NPC.md       → 词条「NPC」
```

### 方式二：添加别名

在文件开头添加 frontmatter，可以为词条设置多个别名：

```md
---
alias:
  - 滑移
  - 基础移动
  - slide
---

滑移是玩家的主要移动方式...
```

这样 `【滑移】`、`【基础移动】`、`【slide】` 都会指向这个文件。

### 方式三：文件内临时定义

在文档中用 `【词条】：定义内容` 创建只在当前文件生效的定义：

```md
【施法者】：发起滑移的玩家
【目标】：被冲击的敌人

当【施法者】命中【目标】时，造成伤害。
```

> 💡 临时定义优先级高于全局定义，适合在单篇文档中补充说明。

---

## 2. 词条引用

用**中文方括号**引用词条：

```md
玩家使用【滑移】后，会触发【冲击伤害】。
```

**效果**：
- 词条显示为链接样式
- 鼠标悬停显示定义卡片
- 卡片内的词条可以继续悬停

**找不到词条时**：系统会提示拼写相似的词条，帮你发现拼写错误。

---

## 3. 策划公式

用 `%% %%` 包裹公式：

```md
%% [伤害] = <攻击力> * (1 + <暴击率> * <暴击伤害>) %%
```

**语法**：
- `[xxx]` — 计算值/结果（蓝色加粗）
- `<xxx>` — 设计值/参数（紫色斜体）

**示例**：

```md
## 伤害计算

%% [最终伤害] = <基础攻击> * [倍率] %%

其中：
%% [倍率] = 1 + <暴击率> * <暴击伤害> %%
```

---

## 4. 区域隔离（可选）

如果不同项目有同名词条，可以用目录或 `scope` 隔离：

### 用目录隔离

```
wiki-docs/
├── 游戏A/
│   └── NPC.md       → 游戏A 的 NPC
└── 游戏B/
    └── NPC.md       → 游戏B 的 NPC
```

### 跨区域引用

```md
【NPC】              # 引用当前目录的 NPC
【游戏B/NPC】        # 引用游戏B 的 NPC
```

---

## 完整示例

```md
---
alias:
  - 滑移冲击
  - 滑移攻击
---

# 滑移冲击

【施法者】：发起【滑移】的玩家
【目标】：被冲击的敌人

## 机制

当【施法者】的【滑移】命中【目标】时，造成冲击伤害。

## 公式

%% [冲击伤害] = <基础伤害> * (1 + <距离加成>) %%

其中：
- %% <距离加成> = <滑移距离> * 0.1 %%（最高 50%）

## 相关

- 【滑移】
- 【暴击】
```

---

## 常见问题

**Q: 词条没有被识别？**
- 检查是否用了中文方括号 `【】` 而不是英文 `[]`
- 检查词条文件是否在 `wiki-docs/` 目录下

**Q: 悬停没有显示定义？**
- 确认词条文件存在且文件名匹配
- 如果用了别名，检查 frontmatter 格式是否正确

**Q: 公式没有高亮？**
- 确认用了 `%% %%` 包裹
- 计算值用 `[方括号]`，设计值用 `<尖括号>`
